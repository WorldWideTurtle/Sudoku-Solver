(()=>{"use strict";const t={decode(t){let e=new Array(9);for(let i=0;i<81;i+=9){let s=new Array(9);for(let e=0;e<9;e++)s[e]=+t[i+e];e[i/9]=s}return e},encode:t=>t.reduce(((t,e)=>t.concat(e.reduce(((t,e)=>t+e.toString()),""),"")),""),isValid(t){const e=this.decode(t);for(let i=0;i<9;i++){let t=new Set,s=new Set,r=new Set,o=e[i];for(let n=0;n<9;n++){const h=o[n],a=e[n][i],l=e[3*~~(i/3)+~~(n/3)][n%3];if(0!==h){if(t.has(h))return!1;t.add(h)}if(0!==a){if(s.has(a))return!1;s.add(a)}if(0!==l){if(r.has(l))return!1;r.add(l)}}}return!0}},e={new:function(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<1|1<<t[i])>>>1;return e},union:(t,e)=>t|e,log2:t=>31-Math.clz32(t)|0,intersect:(t,e)=>t|e,difference:(t,e)=>t^e,subtract:(t,e)=>t&~e,has:function(t,e){return t&1<<e-1},isSingle:function(t){return t&&!(t&t-1)},first:function(t){return this.log2(t&-t)+1},firstBit:function(t){return t&-t},shift:function(t){return t&t-1},delete:function(t){return(t<<1&~(1<<(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)))>>>1},removeBit:(t,e)=>t&~e,add:function(t,e){return(t<<1|1<<e)>>>1},toString:function(t){return t.toString(2)},size:function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},toArray:function(t){let e=new Uint8Array(9),i=0;for(;t>0;)e[i++]=(1&t)*i,t>>>=1;return e}},i=261802,s=[0,9,18,27,36,45,54,63,72,1,10,19,28,37,46,55,64,73,2,11,20,29,38,47,56,65,74,3,12,21,30,39,48,57,66,75,4,13,22,31,40,49,58,67,76,5,14,23,32,41,50,59,68,77,6,15,24,33,42,51,60,69,78,7,16,25,34,43,52,61,70,79,8,17,26,35,44,53,62,71,80],r=[0,1,2,9,10,11,18,19,20,3,4,5,12,13,14,21,22,23,6,7,8,15,16,17,24,25,26,27,28,29,36,37,38,45,46,47,30,31,32,39,40,41,48,49,50,33,34,35,42,43,44,51,52,53,54,55,56,63,64,65,72,73,74,57,58,59,66,67,68,75,76,77,60,61,62,69,70,71,78,79,80];const o=new class{constructor(t){this.initialState=[],this.rowState=new Uint8Array(81),this.activeRowSet=new Uint16Array(9),this.activeColumnSet=new Uint16Array(9),this.activeSquareSet=new Uint16Array(9),this.steps=[[]],this.activeStep=1,this.reverseCount=0,this.itterationCount=0,this.singleCount=0,this.hiddenCount=0,this.guesses=0,this.solveTime=0,this.getRowArray=()=>this.splitArray(this.rowState,9),this.getRowSet=()=>Array.from(this.activeRowSet).map((t=>e.toArray(t))),this.getColumnSet=()=>Array.from(this.activeColumnSet).map((t=>e.toArray(t))),this.getSquareSet=()=>Array.from(this.activeSquareSet).map((t=>e.toArray(t))),this.getValueAt=(t,e)=>this.rowState[9*t+e],this.getValueAtIndex=t=>this.rowState[t],this.initialState=t,t&&this.init()}load(t){this.initialState=t}reset(){this.reverseCount=0,this.itterationCount=0,this.steps=[[]],this.activeStep=1,this.singleCount=0,this.hiddenCount=0,this.guesses=0}splitArray(t,e){let i=new Array(t.length/e);for(let s=0;s<t.length;s+=e){let r=new Uint8Array(e);for(let i=0;i<e;i++)r[i]=t[s+i];i[s/e]=r}return i}init(){if(void 0===this.initialState)return;this.reset();let t=new Uint8Array(this.initialState.flat());this.rowState=t;for(let e=0;e<9;e++){let i=9*e,o=0;for(let e=0;e<9;e++)o|=1<<t[i+e]-1|1<<t[s[i+e]]-1<<9|1<<t[r[i+e]]-1<<18;this.activeRowSet[e]=511&o,this.activeColumnSet[e]=o>>>9&511,this.activeSquareSet[e]=o>>>18&511}}getEntropy(t,e){return 0!==this.getValueAt(t,e)?0:511^(this.activeRowSet[t]|this.activeColumnSet[e]|this.activeSquareSet[~~(e/3)+3*~~(t/3)])}getEntropyAbs(t,e){return 511^(this.activeRowSet[t]|this.activeColumnSet[e]|this.activeSquareSet[~~(e/3)+3*~~(t/3)])}checkSolvedCondition(t){return 511===Array.from(t).reduce(((t,e)=>t&e),511)}isSolved(){return this.checkSolvedCondition(this.activeRowSet)&&this.checkSolvedCondition(this.activeColumnSet)&&this.checkSolvedCondition(this.activeSquareSet)}totalEntropy(){let t=[];for(let i=0;i<9;i++){let s=new Uint8Array(9);for(let t=0;t<9;t++)s[t]=e.size(this.getEntropy(i,t));t.push(s)}return t}solve(t){let e=0;this.solveTime=performance.now(),this.solveHidden();do{if(e++,!(this.solveObviousSingles()||this.solveHidden()||this.guess()))break}while(t);this.solveTime=performance.now()-this.solveTime,this.itterationCount+=e}solveObviousSingles(){let t=!1;for(let i=0;i<9;i++)if(511!==this.activeRowSet[i])for(let s=0;s<9;s++){if(0!==this.rowState[Math.imul(i,9)+s])continue;const r=511^(this.activeRowSet[i]|this.activeColumnSet[s]|this.activeSquareSet[~~(s/3)+~~Math.imul(i/3,3)]);if(0===r)return this.backTrack();0===(r&r-1)&&(this.set(i,s,e.log2(r)+1),this.singleCount++,t=!0)}return t}solveHidden(){for(let t=0;t<9;t++){if(511===this.activeRowSet[t])continue;let i=0,s=0;for(let e=8;-1!==e&&511!==i;e--){if(0!==this.rowState[9*t+e])continue;let r=this.getEntropyAbs(t,e);i|=s&r,s=(s|r)&~i}if(s&&!(s&s-1))for(let r=8;-1!==r;r--)if(0===this.rowState[9*t+r]&&0!==(this.getEntropyAbs(t,r)&s))return this.set(t,r,e.log2(s)+1),this.hiddenCount++,!0}for(let t=8;-1!==t;t--){if(511===this.activeColumnSet[t])continue;let i=0,s=0;for(let e=0;e<9&&511!==i;e++){if(0!==this.rowState[9*e+t])continue;let r=this.getEntropyAbs(e,t);i|=s&r,s=(s|r)&~i}if(s&&!(s&s-1))for(let r=0;r<9;r++)if(0===this.rowState[9*r+t]&&0!==(this.getEntropyAbs(r,t)&s))return this.set(r,t,e.log2(s)+1),this.hiddenCount++,!0}return!1}guessCell(t,i,s){this.guesses++;let r=e.first(s);this.set(t,i,r),this.activeStep=this.steps.push([r<<18|(s&s-1)<<9|t<<4|i])}guess(){let t=i,s=0;for(let i=8;i>=0;i--)if(511!==this.activeRowSet[i])for(let r=8;r>=0;r--)if(0===this.rowState[9*i+r]&&(s=this.getEntropyAbs(i,r),!(e.size(s)>=e.size(t>>>9))&&(t=s<<9|i<<4|r,2===e.size(s))))return this.guessCell(i,r,s),!0;return t!==i&&(this.guessCell(t>>>4&15,15&t,t>>>9),!0)}backTrack(){for(;this.activeStep>1;){const t=this.steps[this.activeStep-1];let i=t[0];if(0!==e.size(i>>>9&511)){this.reverseCount+=t.length;for(const e of t)this.reverse(e);let s=e.first(i>>>9&511);this.set(i>>>4&15,15&i,s),this.steps[this.activeStep-1]=[s<<18|e.shift(i>>>9&511)<<9|240&i|15&i];break}if(this.activeStep<=2)return!1;this.reverseCount+=t.length;for(const e of this.steps.pop())this.reverse(e);this.activeStep--}return!1}undo(){if(0===this.activeStep)return;const t=this.steps[this.activeStep-1];this.reverse(t.pop())}set(t,e,i){this.steps[this.activeStep-1].push(i<<18|t<<4|e),this.activeRowSet[t]=this.activeRowSet[t]|1<<i-1,this.activeColumnSet[e]=this.activeColumnSet[e]|1<<i-1,this.activeSquareSet[~~(e/3)+3*~~(t/3)]=this.activeSquareSet[~~(e/3)+3*~~(t/3)]|1<<i-1,this.rowState[9*t+e]=i}reverse(t){const e=t>>>4&15,i=15&t,s=t>>>18;this.activeRowSet[e]=this.activeRowSet[e]&~(1<<s-1),this.activeColumnSet[i]=this.activeColumnSet[i]&~(1<<s-1),this.activeSquareSet[~~(i/3)+3*~~(e/3)]=this.activeSquareSet[~~(i/3)+3*~~(e/3)]&~(1<<s-1),this.rowState[9*e+i]=0}};self.onmessage=e=>{if(!0===e.data.partial)e.data.grids.forEach((e=>{o.load(t.decode(e)),o.init(),o.solve(!0),postMessage(o.solveTime)}));else{let i=0,s=e.data.grids,r=s.length;for(let e=0;e<r;e++)o.load(t.decode(s[e])),o.init(),o.solve(!0),i+=o.solveTime;postMessage(i)}}})();
//# sourceMappingURL=850.3fd12d97.chunk.js.map